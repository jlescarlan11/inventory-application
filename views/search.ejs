<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search Results</title>
    <link href="/stylesheets/style.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
    />
  </head>
  <body
    class="relative flex flex-col py-16 px-8 text-[var(--color-text)] min-h-dvh bg-[var(--color-primary)] sm:px-4 bg-no-repeat bg-center bg-fixed bg-cover"
    style="background-image: url('/wp10742485.webp')"
  >
    <!-- Overlay -->
    <div class="absolute inset-0 bg-[var(--color-primary)]/50 z-0"></div>
    <%-include('navbar')%>

    <main class="container mx-auto p-4 z-10">
      <h1 class="text-2xl font-bold mb-6">Search Results</h1>

      <% if (pokemons.length > 0) { %>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4">
        <% pokemons.slice().reverse().forEach((pokemon) => { const type1 =
        allTypes.find(t => t.id === pokemon.type1); const type2 = pokemon.type2
        ? allTypes.find(t => t.id === pokemon.type2) : null; %>
        <div
          class="bg-[var(--color-secondary)]/70 backdrop-blur-md rounded-lg shadow-md p-4"
        >
          <div class="flex justify-between items-start mb-2">
            <h3 class="text-lg font-semibold"><%= pokemon.pokemon_name %></h3>
            <span class="text-[var(--color-text)]/50">
              #<%= pokemon.id.toString().padStart(3, '0') %>
            </span>
          </div>
          <div class="flex flex-wrap gap-2">
            <% if (type1) { %>
            <span class="bg-accent/50 text-xs rounded-lg px-2 py-1">
              <%= type1.name %>
            </span>
            <% } %> <% if (type2) { %>
            <span class="bg-accent/50 text-xs rounded-lg px-2 py-1">
              <%= type2.name %>
            </span>
            <% } %>
          </div>
        </div>
        <% }) %>
      </div>
      <% } else { %>
      <div class="text-center mt-10 text-lg italic text-[var(--color-text)]/80">
        <p>No pokemons found in the collection...</p>
      </div>
      <% } %>

      <div class="mt-8">
        <a
          href="/pokemons"
          class="flex items-center gap-2 text-[var(--color-accent)] hover:underline"
          aria-label="Return to shadow wall"
        >
          ‚Üê Back to Pokemon Inventory
        </a>
      </div>
      <%- include('footer') %>
    </main>
  </body>
</html>
